table assets {
  id uuid [pk, not null, default: `uuidv7()`]
  key text [not null]
  license_id uuid [not null, default: `uuidv7()`]
  created_at "timestamp (3) with time zone" [not null, default: `now()`]
  updated_at "timestamp (3) with time zone" [not null, default: `now()`]
  deleted_at "timestamp (3) with time zone"
}

table content_blocks {
  id uuid [pk, not null, default: `uuidv7()`]
  field_id uuid [not null, default: `uuidv7()`]
  type text [not null]
  position integer [not null]
}

table content_blocks_type_data {
  id uuid [pk, not null, default: `uuidv7()`]
  type text [not null]
  limit integer
}

table entities {
  id uuid [pk, not null, default: `uuidv7()`]
  entity_id uuid [not null, default: `uuidv7()`]
  entity_type text [not null]

  indexes {
    (entity_id, entity_type) [name: 'entities_entity_id_entity_type_unique', unique]
  }
}

table events {
  id uuid [pk, not null, default: `uuidv7()`]
  title text [not null]
  summary text [not null]
  image_id uuid [not null, default: `uuidv7()`]
  location text [not null]
  start_date date [not null]
  end_date date
  website text
  slug text [not null, unique]
  document_id uuid [not null, default: `uuidv7()`]
  published_at "timestamp (3) with time zone"
  created_at "timestamp (3) with time zone" [not null, default: `now()`]
  updated_at "timestamp (3) with time zone" [not null, default: `now()`]
  deleted_at "timestamp (3) with time zone"

  indexes {
    document_id [name: 'events_document_id_published_unique', unique]
    document_id [name: 'events_document_id_unpublished_unique', unique]
  }
}

table events_to_resources {
  event_id uuid [not null, default: `uuidv7()`]
  resource_id text [not null]

  indexes {
    (event_id, resource_id) [pk]
  }
}

table fields {
  id uuid [pk, not null, default: `uuidv7()`]
  entity_id uuid [not null, default: `uuidv7()`]
  name text [not null]

  indexes {
    (entity_id, name) [name: 'fields_entity_id_name_unique', unique]
  }
}

table content_blocks_type_image {
  id uuid [pk, not null, default: `uuidv7()`]
  image_id uuid [not null, default: `uuidv7()`]
  caption text
}

table licenses {
  id uuid [pk, not null, default: `uuidv7()`]
  name text [not null]
  url text [not null]
  created_at "timestamp (3) with time zone" [not null, default: `now()`]
  updated_at "timestamp (3) with time zone" [not null, default: `now()`]
  deleted_at "timestamp (3) with time zone"
}

table news {
  id uuid [pk, not null, default: `uuidv7()`]
  title text [not null]
  summary text [not null]
  image_id uuid [not null, default: `uuidv7()`]
  slug text [not null, unique]
  document_id uuid [not null, default: `uuidv7()`]
  published_at "timestamp (3) with time zone"
  created_at "timestamp (3) with time zone" [not null, default: `now()`]
  updated_at "timestamp (3) with time zone" [not null, default: `now()`]
  deleted_at "timestamp (3) with time zone"

  indexes {
    document_id [name: 'news_document_id_published_unique_index', unique]
    document_id [name: 'news_document_id_unpublished_unique_index', unique]
  }
}

table news_to_resources {
  news_item_id uuid [not null, default: `uuidv7()`]
  resource_id text [not null]

  indexes {
    (news_item_id, resource_id) [pk]
  }
}

table content_blocks_type_rich_text {
  id uuid [pk, not null, default: `uuidv7()`]
  content jsonb [not null]
}

table users {
  id uuid [pk, not null, default: `uuidv7()`]
  email text [not null]
  username text [not null]
  created_at "timestamp (3) with time zone" [not null, default: `now()`]
  updated_at "timestamp (3) with time zone" [not null, default: `now()`]
  deleted_at "timestamp (3) with time zone"

  indexes {
    email [name: 'users_email_unique', unique]
  }
}

ref assets_license_id_licenses_id_fk: assets.license_id > licenses.id [delete: no action, update: no action]

ref content_blocks_field_id_fields_id_fk: content_blocks.field_id > fields.id [delete: no action, update: no action]

ref content_blocks_type_data_id_content_blocks_id_fk: content_blocks_type_data.id > content_blocks.id [delete: no action, update: no action]

ref events_image_id_assets_id_fk: events.image_id > assets.id [delete: no action, update: no action]

ref events_to_resources_event_id_events_id_fk: events_to_resources.event_id > events.id [delete: no action, update: no action]

ref fields_entity_id_entities_id_fk: fields.entity_id > entities.id [delete: no action, update: no action]

ref content_blocks_type_image_id_content_blocks_id_fk: content_blocks_type_image.id > content_blocks.id [delete: no action, update: no action]

ref content_blocks_type_image_image_id_assets_id_fk: content_blocks_type_image.image_id > assets.id [delete: no action, update: no action]

ref news_image_id_assets_id_fk: news.image_id > assets.id [delete: no action, update: no action]

ref news_to_resources_news_item_id_news_id_fk: news_to_resources.news_item_id > news.id [delete: no action, update: no action]

ref content_blocks_type_rich_text_id_content_blocks_id_fk: content_blocks_type_rich_text.id > content_blocks.id [delete: no action, update: no action]
